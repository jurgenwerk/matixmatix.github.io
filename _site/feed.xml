<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom"><generator uri="http://jekyllrb.com" version="3.0.3">Jekyll</generator><link href="/feed.xml" rel="self" type="application/atom+xml" /><link href="/" rel="alternate" type="text/html" /><updated>2020-01-05T23:51:19+01:00</updated><id>/</id><title>codeandtechno</title><subtitle>Matic Jurgliƒç is a computer person who specializes in avant-garde internet applications.</subtitle><author><name>Matic Jurgliƒç</name></author><entry><title>2019 Year Review</title><link href="/posts/year-review-2019/" rel="alternate" type="text/html" title="2019 Year Review" /><published>2020-01-04T00:00:00+01:00</published><updated>2020-01-04T00:00:00+01:00</updated><id>/posts/year-review-2019</id><content type="html" xml:base="/posts/year-review-2019/">&lt;p&gt;I like reading people‚Äôs year reviews so I decided to write mine as well, albeit a couple days late.&lt;/p&gt;

&lt;p&gt;People tend to include the goals they set in the previous year, compare it to reality and set the goals for the next year.&lt;/p&gt;

&lt;p&gt;Looking back, I set some 2019 goals for myself on Twitter:&lt;/p&gt;

&lt;blockquote class=&quot;twitter-tweet&quot;&gt;&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;Personal 2019 goals:&lt;br /&gt;&lt;br /&gt;1. Launch a social media growth SaaS (private MVP already up)&lt;br /&gt;2. Launch niche apparel e-commerce &lt;br /&gt;3. Convince a gallery to host my concrete sculptures exhibition &lt;br /&gt;4. Try to secure funds for a weightlifting gym (already got a place)&lt;br /&gt;5. Learn to fly paramotor&lt;/p&gt;&amp;mdash; Matic Jurgliƒç (@matixmatix) &lt;a href=&quot;https://twitter.com/matixmatix/status/1086958223444324352?ref_src=twsrc%5Etfw&quot;&gt;January 20, 2019&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async=&quot;&quot; src=&quot;https://platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;

&lt;p&gt;&lt;br /&gt;
The truth is that I achieved none of this.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Decided to not pursue it any longer since it relied too heavily on ever-changing external services.
&lt;/li&gt;
&lt;li&gt;The plan was to launch computer themed fashion apparel shop. I actually did &lt;a href=&quot;https://unexpectedcomputers.com&quot;&gt;a very small version of this&lt;/a&gt;.
&lt;/li&gt;
&lt;li&gt;Didn‚Äôt even try since my artwork portfolio hasn‚Äôt grew as big as I wanted to.&lt;/li&gt;
&lt;li&gt;I threw together some numbers and discovered it‚Äôs impossible to earn a good living with a weghtlifting gym in a small town.&lt;/li&gt;
&lt;li&gt;I chickened out. I really like how all my limbs function 100% right now and want to keep it that way. I concluded this sport is too dangerous. &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h1 id=&quot;this-years-realization&quot;&gt;This year‚Äôs realization&lt;/h1&gt;

&lt;h2 id=&quot;goals-make-us-blind&quot;&gt;Goals make us blind&lt;/h2&gt;

&lt;p&gt;Given how I fail at reaching my self-imposed goals that I set just for the sake of having some goals (society wants this from me), I discovered that goals to me are meaningless, and I will refrain from having them in the future.&lt;/p&gt;

&lt;p&gt;Goal planning and strictly sticking to it is an act of making ourselves blind to the infinite options which are not part of the original plan.&lt;/p&gt;

&lt;p&gt;I want to try, make and build things. I want to make things better as they were yesterday wherever I set my foot it. This is continuous, non-linear progress, but goals are just stops in between, and they make you miserable when you miss them.&lt;/p&gt;

&lt;!-- Following this notion, I did manage to achieve a couple of unexpected things and capitalize on them. --&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h1 id=&quot;reflecting-on-last-years-projects&quot;&gt;Reflecting on last year‚Äôs projects&lt;/h1&gt;

&lt;p&gt;&lt;br /&gt;
I launched quite a couple of new side-projects this year so I will only mention the most interesting and lucrative ones. You can find the full list &lt;a href=&quot;https://codeandtechno.com/about/&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;jurgenstudio&quot;&gt;jurgenstudio&lt;/h2&gt;

&lt;p&gt;Since my &lt;a href=&quot;https://www.etsy.com/listing/710735227/concrete-berghain-model-replica&quot;&gt;Berghain replica&lt;/a&gt; unexpectely started selling well after a couple of marketing stunts (I posted it online ‚Äújust for the lols‚Äù) I‚Äôve seen there‚Äôs money to be made in this space. I decided to focus on growing my one-man-band &lt;a href=&quot;https://jurgenstudio.com/&quot;&gt;creative studio&lt;/a&gt; that produces niche products from concrete. I created a couple new products and will continue to do so this year. And perhaps expand the business with a friend who does 3D design.&lt;/p&gt;

&lt;h2 id=&quot;windows-95-jewellery&quot;&gt;Windows 95 Jewellery&lt;/h2&gt;

&lt;p&gt;I adore computer aesthetics from the 90s. Dial up modems, the birth of mainstream internet ‚Äî a computer renaissance. This led me to contact a Chinese factory and ask them to produce Windows 95 themed pins, keychains and earrings. In fact, 150 of each, which cost me around $400.&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;a href=&quot;/images/2019-review-post/windows-95-accessories.jpg&quot;&gt;&lt;img src=&quot;/images/2019-review-post/windows-95-accessories.jpg&quot; /&gt;&lt;/a&gt;
    &lt;center&gt;
    &lt;figcaption&gt;

    &lt;/figcaption&gt;
    &lt;/center&gt;

&lt;/figure&gt;

&lt;p&gt;After a couple of marketing stunts these things actually &lt;a href=&quot;https://unexpectedcomputers.com/&quot;&gt;started selling&lt;/a&gt; (around $12 per piece), and I just ran out of the stock. Not sure I want to replenish my stock since I may be a little bit scared of copyright infringement lawsuits.&lt;/p&gt;

&lt;p&gt;This was such a fun ride. I may research the business of niche jewellery some more later this year.&lt;/p&gt;

&lt;h2 id=&quot;myhandmadestorycom&quot;&gt;MyHandmadeStory.com&lt;/h2&gt;

&lt;p&gt;After sales started coming in for my little concrete business, I joined several communities and groups for people who make and sell handmade products online.&lt;/p&gt;

&lt;p&gt;What I discovered is there‚Äôs a constant influx of people who want to start working in this line of business, but have no good idea how to deal with and grow such a business. I decided to &lt;a href=&quot;https://myhandmadestory.com&quot;&gt;start a website&lt;/a&gt; that would educate (and motivate) such people on how to market and grow the business of handmade products via success stories of makers who are already good at this.&lt;/p&gt;

&lt;p&gt;Currently I have 4 stories posted which I had to work really hard to get. It certainly wasn‚Äôt easy to convince handmade business owners to take a couple of hours to make the interview and publicly share their revenue numbers ‚Äî for a website that was basically empty at that time!&lt;/p&gt;

&lt;p&gt;I learned a lot about cold outreach emailing and will continue to improve my game. This is a long term project, hopefully I get to publish many more interviews this year.&lt;/p&gt;

&lt;h2 id=&quot;synonyms-deluxe&quot;&gt;Synonyms Deluxe&lt;/h2&gt;

&lt;p&gt;I built a free &lt;a href=&quot;https://chrome.google.com/webstore/detail/synonyms-deluxe/kfeajncmldifdopobhjlgbhilblhbekd?hl=en&quot;&gt;browser extension&lt;/a&gt; that enables people to look up synonyms for english words. At this point, more than 30 users are using it on a daily level.&lt;/p&gt;

&lt;p&gt;I get a lot of requests from my friends to enrich their texts because I can express myself well. The secret is out - I have no idea what I‚Äôm doing, I just use this extension. üòä&lt;/p&gt;

&lt;h2 id=&quot;gitfuck&quot;&gt;Gitfuck&lt;/h2&gt;

&lt;p&gt;I like software development, and I like complaining about it. I like the tragicomedy of it. So I built a program which scans for swearing on GitHub, adds a meme-esque picture and &lt;a href=&quot;https://instagram.com/gitfuck&quot;&gt;posts it on Instagram&lt;/a&gt;. Completely automated. It‚Äôs hilarous!&lt;/p&gt;

&lt;blockquote class=&quot;instagram-media&quot; data-instgrm-permalink=&quot;https://www.instagram.com/p/B60WqcPnYnI/?utm_source=ig_embed&amp;amp;utm_campaign=loading&quot; data-instgrm-version=&quot;12&quot; style=&quot; background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:540px; min-width:326px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);&quot;&gt;&lt;div style=&quot;padding:16px;&quot;&gt; &lt;a href=&quot;https://www.instagram.com/p/B60WqcPnYnI/?utm_source=ig_embed&amp;amp;utm_campaign=loading&quot; style=&quot; background:#FFFFFF; line-height:0; padding:0 0; text-align:center; text-decoration:none; width:100%;&quot; target=&quot;_blank&quot;&gt; &lt;div style=&quot; display: flex; flex-direction: row; align-items: center;&quot;&gt; &lt;div style=&quot;background-color: #F4F4F4; border-radius: 50%; flex-grow: 0; height: 40px; margin-right: 14px; width: 40px;&quot;&gt;&lt;/div&gt; &lt;div style=&quot;display: flex; flex-direction: column; flex-grow: 1; justify-content: center;&quot;&gt; &lt;div style=&quot; background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; margin-bottom: 6px; width: 100px;&quot;&gt;&lt;/div&gt; &lt;div style=&quot; background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; width: 60px;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;padding: 19% 0;&quot;&gt;&lt;/div&gt; &lt;div style=&quot;display:block; height:50px; margin:0 auto 12px; width:50px;&quot;&gt;&lt;svg width=&quot;50px&quot; height=&quot;50px&quot; viewbox=&quot;0 0 60 60&quot; version=&quot;1.1&quot; xmlns=&quot;https://www.w3.org/2000/svg&quot; xmlns:xlink=&quot;https://www.w3.org/1999/xlink&quot;&gt;&lt;g stroke=&quot;none&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot; fill-rule=&quot;evenodd&quot;&gt;&lt;g transform=&quot;translate(-511.000000, -20.000000)&quot; fill=&quot;#000000&quot;&gt;&lt;g&gt;&lt;path d=&quot;M556.869,30.41 C554.814,30.41 553.148,32.076 553.148,34.131 C553.148,36.186 554.814,37.852 556.869,37.852 C558.924,37.852 560.59,36.186 560.59,34.131 C560.59,32.076 558.924,30.41 556.869,30.41 M541,60.657 C535.114,60.657 530.342,55.887 530.342,50 C530.342,44.114 535.114,39.342 541,39.342 C546.887,39.342 551.658,44.114 551.658,50 C551.658,55.887 546.887,60.657 541,60.657 M541,33.886 C532.1,33.886 524.886,41.1 524.886,50 C524.886,58.899 532.1,66.113 541,66.113 C549.9,66.113 557.115,58.899 557.115,50 C557.115,41.1 549.9,33.886 541,33.886 M565.378,62.101 C565.244,65.022 564.756,66.606 564.346,67.663 C563.803,69.06 563.154,70.057 562.106,71.106 C561.058,72.155 560.06,72.803 558.662,73.347 C557.607,73.757 556.021,74.244 553.102,74.378 C549.944,74.521 548.997,74.552 541,74.552 C533.003,74.552 532.056,74.521 528.898,74.378 C525.979,74.244 524.393,73.757 523.338,73.347 C521.94,72.803 520.942,72.155 519.894,71.106 C518.846,70.057 518.197,69.06 517.654,67.663 C517.244,66.606 516.755,65.022 516.623,62.101 C516.479,58.943 516.448,57.996 516.448,50 C516.448,42.003 516.479,41.056 516.623,37.899 C516.755,34.978 517.244,33.391 517.654,32.338 C518.197,30.938 518.846,29.942 519.894,28.894 C520.942,27.846 521.94,27.196 523.338,26.654 C524.393,26.244 525.979,25.756 528.898,25.623 C532.057,25.479 533.004,25.448 541,25.448 C548.997,25.448 549.943,25.479 553.102,25.623 C556.021,25.756 557.607,26.244 558.662,26.654 C560.06,27.196 561.058,27.846 562.106,28.894 C563.154,29.942 563.803,30.938 564.346,32.338 C564.756,33.391 565.244,34.978 565.378,37.899 C565.522,41.056 565.552,42.003 565.552,50 C565.552,57.996 565.522,58.943 565.378,62.101 M570.82,37.631 C570.674,34.438 570.167,32.258 569.425,30.349 C568.659,28.377 567.633,26.702 565.965,25.035 C564.297,23.368 562.623,22.342 560.652,21.575 C558.743,20.834 556.562,20.326 553.369,20.18 C550.169,20.033 549.148,20 541,20 C532.853,20 531.831,20.033 528.631,20.18 C525.438,20.326 523.257,20.834 521.349,21.575 C519.376,22.342 517.703,23.368 516.035,25.035 C514.368,26.702 513.342,28.377 512.574,30.349 C511.834,32.258 511.326,34.438 511.181,37.631 C511.035,40.831 511,41.851 511,50 C511,58.147 511.035,59.17 511.181,62.369 C511.326,65.562 511.834,67.743 512.574,69.651 C513.342,71.625 514.368,73.296 516.035,74.965 C517.703,76.634 519.376,77.658 521.349,78.425 C523.257,79.167 525.438,79.673 528.631,79.82 C531.831,79.965 532.853,80.001 541,80.001 C549.148,80.001 550.169,79.965 553.369,79.82 C556.562,79.673 558.743,79.167 560.652,78.425 C562.623,77.658 564.297,76.634 565.965,74.965 C567.633,73.296 568.659,71.625 569.425,69.651 C570.167,67.743 570.674,65.562 570.82,62.369 C570.966,59.17 571,58.147 571,50 C571,41.851 570.966,40.831 570.82,37.631&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div style=&quot;padding-top: 8px;&quot;&gt; &lt;div style=&quot; color:#3897f0; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:550; line-height:18px;&quot;&gt; View this post on Instagram&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;padding: 12.5% 0;&quot;&gt;&lt;/div&gt; &lt;div style=&quot;display: flex; flex-direction: row; margin-bottom: 14px; align-items: center;&quot;&gt;&lt;div&gt; &lt;div style=&quot;background-color: #F4F4F4; border-radius: 50%; height: 12.5px; width: 12.5px; transform: translateX(0px) translateY(7px);&quot;&gt;&lt;/div&gt; &lt;div style=&quot;background-color: #F4F4F4; height: 12.5px; transform: rotate(-45deg) translateX(3px) translateY(1px); width: 12.5px; flex-grow: 0; margin-right: 14px; margin-left: 2px;&quot;&gt;&lt;/div&gt; &lt;div style=&quot;background-color: #F4F4F4; border-radius: 50%; height: 12.5px; width: 12.5px; transform: translateX(9px) translateY(-18px);&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;margin-left: 8px;&quot;&gt; &lt;div style=&quot; background-color: #F4F4F4; border-radius: 50%; flex-grow: 0; height: 20px; width: 20px;&quot;&gt;&lt;/div&gt; &lt;div style=&quot; width: 0; height: 0; border-top: 2px solid transparent; border-left: 6px solid #f4f4f4; border-bottom: 2px solid transparent; transform: translateX(16px) translateY(-4px) rotate(30deg)&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;margin-left: auto;&quot;&gt; &lt;div style=&quot; width: 0px; border-top: 8px solid #F4F4F4; border-right: 8px solid transparent; transform: translateY(16px);&quot;&gt;&lt;/div&gt; &lt;div style=&quot; background-color: #F4F4F4; flex-grow: 0; height: 12px; width: 16px; transform: translateY(-4px);&quot;&gt;&lt;/div&gt; &lt;div style=&quot; width: 0; height: 0; border-top: 8px solid #F4F4F4; border-left: 8px solid transparent; transform: translateY(-4px) translateX(8px);&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt; &lt;div style=&quot;display: flex; flex-direction: column; flex-grow: 1; justify-content: center; margin-bottom: 24px;&quot;&gt; &lt;div style=&quot; background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; margin-bottom: 6px; width: 224px;&quot;&gt;&lt;/div&gt; &lt;div style=&quot; background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; width: 144px;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/a&gt;&lt;p style=&quot; color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;&quot;&gt;&lt;a href=&quot;https://www.instagram.com/p/B60WqcPnYnI/?utm_source=ig_embed&amp;amp;utm_campaign=loading&quot; style=&quot; color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none;&quot; target=&quot;_blank&quot;&gt;A post shared by @gitfuck&lt;/a&gt; on &lt;time style=&quot; font-family:Arial,sans-serif; font-size:14px; line-height:17px;&quot; datetime=&quot;2020-01-02T12:55:39+00:00&quot;&gt;Jan 2, 2020 at 4:55am PST&lt;/time&gt;&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt;
&lt;script async=&quot;&quot; src=&quot;//www.instagram.com/embed.js&quot;&gt;&lt;/script&gt;

&lt;h1 id=&quot;art&quot;&gt;Art&lt;/h1&gt;

&lt;p&gt;My main art direction are &lt;a href=&quot;https://jurgenstudio.com/artworks&quot;&gt;concrete sculptures&lt;/a&gt;, but recently I started exploring a new direction: concrete paintings. I really like doing them and I‚Äôm receiving wonderful feedback. Will continue exploring this direction.&lt;/p&gt;

&lt;p&gt;I want to have an exhibition this year.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h1 id=&quot;life&quot;&gt;Life&lt;/h1&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;I reached 30 years in July.&lt;/p&gt;

&lt;p&gt;I don‚Äôt know what to think of it. I think I‚Äôve actually just started living.&lt;/p&gt;

&lt;p&gt;Friends put up an ornamented dead tree for me.&lt;/p&gt;

&lt;h2 id=&quot;dietary-adjustment&quot;&gt;Dietary adjustment&lt;/h2&gt;

&lt;p&gt;Last couple of years I suffered from a weird condition where I was experiencing random brain fog and fatigue throughout the day. I thought my body was severely broken.&lt;/p&gt;

&lt;p&gt;Unrelated, I‚Äôve seen some friends doing keto, so I decided to give it try (to lose some weight). I discovered my hormonal (?) mood swings stopped completely.&lt;/p&gt;

&lt;p&gt;I accidentally cured myself.&lt;/p&gt;

&lt;h2 id=&quot;travelling&quot;&gt;Travelling&lt;/h2&gt;

&lt;p&gt;Did some travels this year, but I wish to do more this year.&lt;/p&gt;

&lt;p&gt;I went to:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Bali&lt;/li&gt;
  &lt;li&gt;Berlin, twice&lt;/li&gt;
  &lt;li&gt;Sailboat trip in the Adriatic, twice&lt;/li&gt;
  &lt;li&gt;Spent a lot of time in Croatia in the summer&lt;/li&gt;
  &lt;li&gt;Venice&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;And somehow I added 30.000 kilometers to my car‚Äôs odometer, even though I work from home. ü§î&lt;/p&gt;

&lt;h2 id=&quot;books&quot;&gt;Books&lt;/h2&gt;

&lt;p&gt;I always kinda struggled to read books, so I only read a couple per year. This year I discovered audio books. They fit my lifestyle much better. I really went at it and listened to more than 20 books. My favorite was &lt;a href=&quot;https://www.goodreads.com/book/show/13530973-antifragile&quot;&gt;Antifragile&lt;/a&gt; by Nicolas Taleb. It made a big impact on me.&lt;/p&gt;

&lt;h2 id=&quot;physical-activity&quot;&gt;Physical activity&lt;/h2&gt;

&lt;p&gt;I continued visiting the gym 3 times per week. I started skateboarding again, which is a big pleasure.&lt;/p&gt;

&lt;p&gt;I‚Äôve never felt so physically strong and fit before.&lt;/p&gt;

&lt;h2 id=&quot;relationships&quot;&gt;Relationships&lt;/h2&gt;

&lt;p&gt;What I particularly liked this year is how much deeper my relationships with my friends and family have gotten. It didn‚Äôt happen on its own - I continuously exhibit effort through random acts of kindness and appreciation, which made a big difference.&lt;/p&gt;

&lt;p&gt;Still single, though. üòí&lt;/p&gt;

&lt;h2 id=&quot;carreer&quot;&gt;Carreer&lt;/h2&gt;

&lt;p&gt;Perhaps the largest update in this year‚Äôs review is that I decided to part ways with &lt;a href=&quot;https://nightwatch.io&quot;&gt;Nightwatch&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;This was the toughest decision I had to do in my life. I was in a dark and depressed place, and I‚Äôve recognized choosing this option is the only way to snap out of it.&lt;/p&gt;

&lt;p&gt;I was the co-founder and built a considerate portion of the company. It was my baby, it was my life, it was my identity.&lt;/p&gt;

&lt;p&gt;But things happen. People grow apart.&lt;/p&gt;

&lt;p&gt;I decided to start afresh.&lt;/p&gt;</content><category term="posts" /><summary>Goals make us blind.</summary></entry><entry><title>User impersonation in SaaS with Ember.js and Ruby on Rails</title><link href="/posts/user-impersonation-ember-simple-auth-doorkeeper/" rel="alternate" type="text/html" title="User impersonation in SaaS with Ember.js and Ruby on Rails" /><published>2019-04-12T00:00:00+02:00</published><updated>2019-04-12T00:00:00+02:00</updated><id>/posts/user-impersonation-ember-simple-auth-doorkeeper</id><content type="html" xml:base="/posts/user-impersonation-ember-simple-auth-doorkeeper/">&lt;p&gt;When developing SaaS, it‚Äôs very convenient, and arguably even urgent, to be able to log in as your users and see exactly what they see. This is especially important when debugging an issue or enabling your support team to check for bugs without looking into error logs.&lt;/p&gt;

&lt;p&gt;I‚Äôm going to show you how you can do it using the following technologies:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Ember.js (with &lt;a href=&quot;https://ember-simple-auth.com/&quot;&gt;Ember Simple Auth&lt;/a&gt; add-on)&lt;/li&gt;
  &lt;li&gt;Ruby on Rails (with &lt;a href=&quot;https://github.com/doorkeeper-gem/doorkeeper&quot;&gt;Doorkeeper&lt;/a&gt; gem for OAuth2)&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;how-should-this-work&quot;&gt;How should this work?&lt;/h2&gt;

&lt;p&gt;When the client is exchanging username and password for an access token, we call this OAuth 2.0 Password Grant flow.&lt;/p&gt;

&lt;p&gt;If we wanted to impersonate a user, we need to create a new token by bypassing the part where password is used and ask Doorkeeper to issue a new token for the provided user, directly.&lt;/p&gt;

&lt;p&gt;Then, when we have the token, we need a way to pass it to the Ember app that uses the Ember Simple Auth add-on.&lt;/p&gt;

&lt;h2 id=&quot;creating-a-new-authenticator&quot;&gt;Creating a new authenticator&lt;/h2&gt;

&lt;p&gt;We take the existing &lt;code class=&quot;highlighter-rouge&quot;&gt;oauth2&lt;/code&gt; authorizer and extend its &lt;code class=&quot;highlighter-rouge&quot;&gt;authenticate&lt;/code&gt; method. Originally it accepts username and password, and gets the token by issuing a request to your OAuth endpoint.&lt;/p&gt;

&lt;p&gt;We modify this so we can pass &lt;code class=&quot;highlighter-rouge&quot;&gt;tokenData&lt;/code&gt; directly, which logs us in:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// app/authenticators/oauth2-custom-inject.js&lt;/span&gt;

&lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;OAuth2&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;./oauth2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;isEmpty&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@ember/utils&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;RSVP&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;rsvp&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kr&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;OAuth2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;extend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// tokenData is { access_token: &#39;asd&#39;, refreshToken: &#39;asdf&#39;, ... }&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;authenticate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tokenData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;RSVP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;expiresAt&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;_absolutizeExpirationTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tokenData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;expires_in&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;_scheduleAccessTokenRefresh&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;tokenData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;expires_in&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;expiresAt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;tokenData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;refresh_token&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;isEmpty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;expiresAt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;tokenData&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;assign&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tokenData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;expires_at&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;expiresAt&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

      &lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tokenData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;We also need to add the accompanying authorizer:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// app/authorizers/oauth2-custom-inject.js&lt;/span&gt;

&lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;OAuth2&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;./oauth2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;OAuth2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;extend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Now, where should we call this new custom authenticator? One way is to do it in the &lt;code class=&quot;highlighter-rouge&quot;&gt;application&lt;/code&gt; route, where we receive the token data in a form of a query parameter when the app loads.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// app/routes/application.js&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;beforeModel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;transition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;uit&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;transition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;queryParams&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;userImpersonationToken&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;uit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tryLoginWithProvidedToken&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;uit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;_loadCurrentUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;tryLoginWithProvidedToken&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;uit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;RSVP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;tokenObj&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;decodeURIComponent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;uit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;authenticate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;s2&quot;&gt;&quot;authenticator:oauth2-custom-inject&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;tokenObj&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;This enables us to send the token data to our Ember app via &lt;code class=&quot;highlighter-rouge&quot;&gt;userImpersonationToken&lt;/code&gt; query parameter.&lt;/p&gt;

&lt;h2 id=&quot;generating-a-token-for-any-user&quot;&gt;Generating a token for any user&lt;/h2&gt;

&lt;p&gt;Use the following code for generating a URL that gets you logged in as any user.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;access_token&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Doorkeeper&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;AccessToken&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;create!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;resource_owner_id: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;scopes: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;all&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;expires_in: &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Doorkeeper&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;configuration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;access_token_expires_in&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;ss&quot;&gt;use_refresh_token: &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Doorkeeper&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;configuration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;refresh_token_enabled?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;token_response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Doorkeeper&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;OAuth&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;TokenResponse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;access_token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_json&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;user_impersonation_url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Rails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;configuration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;web_app_url&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/?userImpersonationToken=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;token_response&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;A good place to use this code and redirect to the &lt;code class=&quot;highlighter-rouge&quot;&gt;user_impersonation_url&lt;/code&gt; is in your admin app, for example Rails Active Admin.&lt;/p&gt;

&lt;h2 id=&quot;things-to-watch-out-for&quot;&gt;Things to watch out for&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;This keeps you logged in with another user when you reopen the browser. You might want to find a way to nullify the session after you are done impersonating.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;If you have some kind of user behaviour tracking set up (e.g. Mixpanel), you might want to disable it while you are impersonating.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;</content><category term="posts" /><summary>When developing SaaS, it‚Äôs very convenient, and arguably even urgent, to be able to log in as your users and see exactly what they see. This is especially important when debugging an issue or enabling your support team to check for bugs without looking into error logs.</summary></entry><entry><title>If Marcus Aurelius were a software developer</title><link href="/posts/stoicism-for-developers/" rel="alternate" type="text/html" title="If Marcus Aurelius were a software developer" /><published>2019-01-13T00:00:00+01:00</published><updated>2019-01-13T00:00:00+01:00</updated><id>/posts/stoicism-for-developers</id><content type="html" xml:base="/posts/stoicism-for-developers/">&lt;p&gt;Let‚Äôs face it; working with people is hard, even more so when you feel like people in your organization are incompetent, sloppy, holding you back, or even working against you.&lt;/p&gt;

&lt;p&gt;Your manager is a dick. Your back-end team keeps making APIs you don‚Äôt like. The new guy who was supposed to be a senior developer broke down production and you were paged while watching the game. Perhaps you‚Äôre dealing with a &lt;a href=&quot;https://clientsfromhell.net/&quot;&gt;client from hell&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;It makes you upset. If it were up to you, you would never choose to work with these people. You feel angry, and want to punch through a drywall. You find yourself morphing into Clint Eastwood in the movie Gran Torino.&lt;/p&gt;

&lt;p&gt;The reason for entering this unproductive state of mind is evident: &lt;b&gt;it‚Äôs much easier to think about our differences than it is to think about our similarities&lt;/b&gt;. Let me explain.&lt;/p&gt;

&lt;p&gt;Ancient stoics had a couple of very good ideas to help stay calm even when working with the most unpleasant of people. Marcus Aurelius addresses this in his book &lt;a href=&quot;https://en.wikipedia.org/wiki/Meditations&quot;&gt;Meditations&lt;/a&gt;: he suggests a morning routine involving negative visualization, and urges to recognize the similarities between you and the people who you feel so negative about:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;When you wake up in the morning, tell yourself: the people I deal with today will be meddling, ungrateful, arrogant, dishonest, jealous and surly. They are like this because they can‚Äôt tell good from evil. But I have seen the beauty of good, and the ugliness of evil, and have recognized that the wrongdoer has a nature related to my own - not of the same blood and birth, but the same mind, and possessing a share of the divine. And so none of them can hurt me. No one can implicate me in ugliness. Nor can I feel angry at my relative, or hate him. We were born to work together like feet, hands and eyes, like the two rows of teeth, upper and lower. To obstruct each other is unnatural. To feel anger at someone, to turn your back on him: these are unnatural.
&lt;cite&gt;Marcus Aurelius, Meditations&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Stoicism is widely known for its perennial ideas. What was written 2000 years ago still holds true today.&lt;/p&gt;

&lt;p&gt;But, can we modernize it a bit? Let‚Äôs try to translate Marcus‚Äôs morning routine into developer lingo.&lt;/p&gt;

&lt;h3 id=&quot;when-you-wake-up-in-the-morning-tell-yourself&quot;&gt;When you wake up in the morning, tell yourself:&lt;/h3&gt;

&lt;p&gt;&lt;i&gt;The software designed by my coworkers will be buggy, broken, undocumented and written in contexts whose traces have been lost forever. I will be managed by unreasonable bosses who lost touch with reality, and I will deal with abysmal implementations containing blatant security holes. While trying to catch aggressive deadlines set by my managers, I will continuously be running into unexplainable issues, halting my progress. Customers will be reporting problems that fall into the category of edge cases I would have never imagined.&lt;/i&gt;&lt;/p&gt;

&lt;p&gt;&lt;i&gt;Yet I have recognized my senseless boss and sloppy coworker have the same motivations as I do. We are doing this together to improve our and other‚Äôs well-being, and show the other what they haven‚Äôt yet seen. It‚Äôs foolish to be angry with my coworkers, as we are all subject to the same imperfections of reason.&lt;/i&gt;&lt;/p&gt;

&lt;p&gt;The key takeaway is that the people in your organization who disappoint you are not inherently different from you, thus, to feel anger at your own kind, is unreasonable.&lt;/p&gt;

&lt;p&gt;There is no need to escape your environment to find a sense of calm. When you lose your temper, you‚Äôve already fallen behind.&lt;/p&gt;</content><category term="posts" /><summary>Let‚Äôs face it; working with people is hard, even more so when you feel like people in your organization are incompetent, sloppy, holding you back, or even working against you.</summary></entry><entry><title>Making a concrete coffee table</title><link href="/posts/concrete-coffee-table/" rel="alternate" type="text/html" title="Making a concrete coffee table" /><published>2019-01-05T00:00:00+01:00</published><updated>2019-01-05T00:00:00+01:00</updated><id>/posts/concrete-coffee-table</id><content type="html" xml:base="/posts/concrete-coffee-table/">&lt;p&gt;Coffee tables are arguably the most important piece of furniture in a living room. They hold much more than coffee, and are a centerpiece around which the most intimate kind of socialising happens.&lt;/p&gt;

&lt;p&gt;Read on to see how to make one out of concrete.&lt;/p&gt;

&lt;figure class=&quot;&quot;&gt;
&lt;a href=&quot;/images/coffeetable-post/concrete-coffee-table-final-2.jpg&quot;&gt;&lt;img src=&quot;/images/coffeetable-post/concrete-coffee-table-final-2.jpg&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Finished concrete coffee table, weighing around 100 kilograms.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;After some napkin math, I decided on the measures. The calculation was I needed around 5 bags of cement. I was exactly right.&lt;/p&gt;

&lt;h2 id=&quot;mold-assembly&quot;&gt;Mold assembly&lt;/h2&gt;

&lt;figure class=&quot;third&quot;&gt;
    &lt;a href=&quot;/images/coffeetable-post/concrete-coffee-table-saw.jpg&quot;&gt;&lt;img src=&quot;/images/coffeetable-post/concrete-coffee-table-saw.jpg&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/images/coffeetable-post/concrete-coffee-table-mold.jpg&quot;&gt;&lt;img src=&quot;/images/coffeetable-post/concrete-coffee-table-mold.jpg&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/images/coffeetable-post/concrete-coffee-table-mold-complete.jpg&quot;&gt;&lt;img src=&quot;/images/coffeetable-post/concrete-coffee-table-mold-complete.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Putting some stuff together.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;For projects like this you usually want to go with melamine wood (white boards on the upper pictures). It‚Äôs not really wood though, it‚Äôs just diced wooden garbage mashed back together into a solid shape and covered with a smooth layer. It‚Äôs cheap, easy to cut, and most importantly, doesn‚Äôt bend when wet.&lt;/p&gt;

&lt;p&gt;I didn‚Äôt have enough melamine, so I used some other, ‚Äúnormal‚Äù wood that was laying around. I knew this wood would bend after getting in contact with wet concrete. I was just hoping the concrete would harden fast enough, which fortunately it did.&lt;/p&gt;

&lt;p&gt;If you plan on making a reusable mold like this, make sure to use melamine wood only.&lt;/p&gt;

&lt;h2 id=&quot;pouring-in-the-concrete&quot;&gt;Pouring in the concrete&lt;/h2&gt;

&lt;p&gt;Action time.&lt;/p&gt;

&lt;p&gt;I used a cement mix (with sand aggregate already added) and poured it into the wooden enclosure.&lt;/p&gt;

&lt;figure class=&quot;third&quot;&gt;
    &lt;a href=&quot;/images/coffeetable-post/concrete-coffee-table-mold-concrete-1.jpg&quot;&gt;&lt;img src=&quot;/images/coffeetable-post/concrete-coffee-table-mold-concrete-1.jpg&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/images/coffeetable-post/concrete-coffee-table-mold-concrete-2.jpg&quot;&gt;&lt;img src=&quot;/images/coffeetable-post/concrete-coffee-table-mold-concrete-2.jpg&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/images/coffeetable-post/concrete-coffee-table-mold-concrete-3.jpg&quot;&gt;&lt;img src=&quot;/images/coffeetable-post/concrete-coffee-table-mold-concrete-3.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;With concrete, clamps are your friends. Always.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h2 id=&quot;dismantling&quot;&gt;Dismantling&lt;/h2&gt;

&lt;p&gt;Aah, always the best part.&lt;/p&gt;

&lt;p&gt;After two days it was time to take the mold apart. I didn‚Äôt do a particular good job with getting rid of the air bubbles, and since I was aiming for a smooth surface, I needed to fill the gaps with slurry (3rd picture below).&lt;/p&gt;

&lt;p&gt;Slurry is a term for cement paste mixed with a chemical that helps it bond with the already dry concrete.&lt;/p&gt;

&lt;figure class=&quot;third&quot;&gt;
    &lt;a href=&quot;/images/coffeetable-post/concrete-coffee-table-dismantling-1.jpg&quot;&gt;&lt;img src=&quot;/images/coffeetable-post/concrete-coffee-table-dismantling-1.jpg&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/images/coffeetable-post/concrete-coffee-table-dismantling-2.jpg&quot;&gt;&lt;img src=&quot;/images/coffeetable-post/concrete-coffee-table-dismantling-2.jpg&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/images/coffeetable-post/concrete-coffee-table-dismantling-3.jpg&quot;&gt;&lt;img src=&quot;/images/coffeetable-post/concrete-coffee-table-dismantling-3.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h2 id=&quot;polishing&quot;&gt;Polishing&lt;/h2&gt;

&lt;p&gt;For the purpose of polishing I got myself a simple wet concrete polisher from eBay. The polisher uses diamond pads with different grits (you switch them from lower to higher numbers).&lt;/p&gt;

&lt;figure class=&quot;third&quot;&gt;
    &lt;a href=&quot;/images/coffeetable-post/concrete-coffee-table-polishing-1.jpg&quot;&gt;&lt;img src=&quot;/images/coffeetable-post/concrete-coffee-table-polishing-1.jpg&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/images/coffeetable-post/concrete-coffee-table-polishing-2.jpg&quot;&gt;&lt;img src=&quot;/images/coffeetable-post/concrete-coffee-table-polishing-2.jpg&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/images/coffeetable-post/concrete-coffee-table-polishing-3.jpg&quot;&gt;&lt;img src=&quot;/images/coffeetable-post/concrete-coffee-table-polishing-3.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;The polishing process is done on a watery surface because that way it‚Äôs more efficient and does less damage to the pads. It also prevents toxic concrete dust from entering your lungs and turning them into a stone.&lt;/p&gt;

&lt;h2 id=&quot;finalizing-and-staining&quot;&gt;Finalizing and staining&lt;/h2&gt;

&lt;p&gt;After polishing, this is how the table looked.&lt;/p&gt;

&lt;p&gt;At this point the table needs to be stained with a protective liquid that prevents the concrete from soaking up spilled wine and whisky.&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;a href=&quot;/images/coffeetable-post/concrete-coffee-table-pre-stain.jpg&quot;&gt;&lt;img src=&quot;/images/coffeetable-post/concrete-coffee-table-pre-stain.jpg&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/images/coffeetable-post/concrete-coffee-table-staining.jpg&quot;&gt;&lt;img src=&quot;/images/coffeetable-post/concrete-coffee-table-staining.jpg&quot; /&gt;&lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;It was a bad decision to stain it with a brush, because brushmarks are seen under some angles in bright light. For mark-less coating, it‚Äôs better to use a dense roller.&lt;/p&gt;

&lt;p&gt;P.S: While concrete is the best material for making furniture, wood comes as a close second. Make sure to check out my friends‚Äô &lt;a href=&quot;https://ergochord.com/&quot;&gt;height adjustable work desks&lt;/a&gt;.&lt;/p&gt;</content><category term="posts" /><summary>Coffee tables are arguably the most important piece of furniture in a living room. They hold much more than coffee, and are a centerpiece around which the most intimate kind of socialising happens.</summary></entry><entry><title>What is SaaS white labeling and how to do it?</title><link href="/posts/saas-whitelabeling/" rel="alternate" type="text/html" title="What is SaaS white labeling and how to do it?" /><published>2018-12-26T00:00:00+01:00</published><updated>2018-12-26T00:00:00+01:00</updated><id>/posts/saas-whitelabeling</id><content type="html" xml:base="/posts/saas-whitelabeling/">&lt;p&gt;Depending on your online business, white labeling can turn out to be a fantastic business model. This applies especially when your target customers are actually &lt;b&gt;customers who have their own customers&lt;/b&gt;, for example agencies, consultancies and client-oriented businesses.&lt;/p&gt;

&lt;p&gt;In this case there is a real chance that adding support for white labeling in your product will improve your chances of attracting advanced users and position your product higher in the eyes of corporate customers (i.e. those who can pay top dollar).&lt;/p&gt;

&lt;h3 id=&quot;but-what-exactly-is-white-labeling&quot;&gt;But what exactly is white labeling?&lt;/h3&gt;

&lt;p&gt;White labeling means taking a blank product and slapping a label for another company on it.&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;a href=&quot;/images/whitelabel-post/whitelabeled-bottles.jpg&quot;&gt;&lt;img src=&quot;/images/whitelabel-post/whitelabeled-bottles.jpg&quot; /&gt;&lt;/a&gt;
    &lt;center&gt;
    &lt;figcaption&gt;&lt;/figcaption&gt;&lt;/center&gt;
&lt;/figure&gt;

&lt;p&gt;It means other companies can take your (online, in this case) product and brand it as their own.&lt;/p&gt;

&lt;h3 id=&quot;white-labeled-saas-example&quot;&gt;White labeled SaaS example&lt;/h3&gt;

&lt;p&gt;Let‚Äôs imagine you built a website performance tracker that makes reports of websites‚Äô speed. On one hand, you have individual customers that use your service to track their own websites. On the other hand, there are many web performance consultancies and agencies who make a living tuning &lt;em&gt;other&lt;/em&gt; people‚Äôs (i.e. their customers‚Äô) websites. To deliver reports, they have 3 options:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Build their own website tracking solution. This is expensive to build, and expensive to maintain. Not all businesses are in a position to afford and maintain it.&lt;/li&gt;
  &lt;li&gt;Use a 3rd party solution (like yours). Their clients will notice they are relying on an external service, which may impair their trust.&lt;/li&gt;
  &lt;li&gt;Use a 3rd party solution (like yours), but brand it (white label) as their own. Their clients will think the reporting solution (which is actually yours, but branded differently) is an integral part of their service, which may make them look better in their clients‚Äô eyes.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;white-labeling-settings-in-saas&quot;&gt;White labeling settings in SaaS&lt;/h3&gt;

&lt;p&gt;White labeling should be approached the same way as &lt;b&gt;internationalization&lt;/b&gt;. The principle is the same. Configurations can be saved in asset folders or in a database, and conditionally shown depending on the user and their settings.&lt;/p&gt;

&lt;p&gt;Here is an example of how we did these settings at &lt;a href=&quot;https://nightwatch.io&quot; target=&quot;_blank&quot;&gt;Nightwatch.io&lt;/a&gt;:&lt;/p&gt;

&lt;figure&gt;
    &lt;a href=&quot;/images/whitelabel-post/whitelabel-settings-example.png&quot;&gt;&lt;img src=&quot;/images/whitelabel-post/whitelabel-settings-example.png&quot; /&gt;&lt;/a&gt;
    &lt;center&gt;
    &lt;figcaption&gt;&lt;/figcaption&gt;&lt;/center&gt;
&lt;/figure&gt;

&lt;h3 id=&quot;white-label-subdomain&quot;&gt;White label (sub)domain&lt;/h3&gt;

&lt;p&gt;This is the entry point to a white labeled SaaS product.&lt;/p&gt;

&lt;p&gt;Your customers who wish to offer your product branded as their own will want to customize its URL.&lt;/p&gt;

&lt;p&gt;The DNS part is easy, usually solved with a &lt;em&gt;CNAME&lt;/em&gt; record. Returning to our previous example, let‚Äôs suppose that your SaaS product URL is &lt;em&gt;WebPerformanceTracking.com&lt;/em&gt;. Let‚Äôs suppose that one of your customers, who runs their consultancy at WebPerfCompany.com wants to white label your service and make it accessible at &lt;em&gt;tracker.WebPerfCompany.com&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;What you can do is set up a &lt;em&gt;whitelabel.WebPerformanceTracking.com&lt;/em&gt;, point it to your server and instruct your customer to set up a CNAME record on their &lt;em&gt;tracker.webperfcompany.com&lt;/em&gt; subdomain. This will route the requests to their white labeled service back to your server.&lt;/p&gt;

&lt;h3 id=&quot;theres-a-problem-though&quot;&gt;There‚Äôs a problem though&lt;/h3&gt;

&lt;figure&gt;
    &lt;a href=&quot;/images/whitelabel-post/page-not-secure.png&quot;&gt;&lt;img src=&quot;/images/whitelabel-post/page-not-secure.png&quot; /&gt;&lt;/a&gt;
    &lt;center&gt;
    &lt;figcaption&gt;&lt;/figcaption&gt;&lt;/center&gt;
&lt;/figure&gt;

&lt;p&gt;The described connection to your customer‚Äôs white labeled service is unsecure (non-https). Since browsers are complaining about it more and more, and you don‚Äôt want to break clients‚Äôs trust, it only makes sense to secure it.&lt;/p&gt;

&lt;p&gt;To make secure connections from your customers‚Äô white labeled domains to your server, you have two options.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Convince your customer to send you a cetificate for the white labeled domain and use it on your server. This is not really convenient nor desirable, because it‚Äôs a hard to maintain, hard to scale, needs a lot of support and it makes you a keeper of foreign certificate, which brings extra burderns.&lt;/li&gt;
  &lt;li&gt;Use or build a proxying service with a middleware or CDN that creates Let‚Äôs Encrypt certificates on the fly.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;If you want hassle free whitelabeling, then you want to go with option 2. Depending on your scale, you probably want to use a 3rd party solution for that.&lt;/p&gt;

&lt;p&gt;How this usually works is that your customer still has to create a CNAME record, but there is an additional step you have to make. You have to report the white labeled domain to your selected proxying service via their API so they could setup the certificate in the background and do the necessary routing.&lt;/p&gt;

&lt;p&gt;CloudFlare is probably the simplest service you can use to secure white labeled connections, but at the time of writing, it‚Äôs available only as a part of an &lt;a href=&quot;https://www.cloudflare.com/saas/&quot;&gt;expensive corporate plan&lt;/a&gt;. Alternatively, you can use CDN services, like &lt;a href=&quot;https://fly.io/&quot;&gt;Fly.io&lt;/a&gt; or &lt;a href=&quot;https://zeit.co&quot;&gt;Zeit&lt;/a&gt; to deploy a proxying app which responds to secure whitelabel connections and serves data from your origin server.&lt;/p&gt;

&lt;h3 id=&quot;final-step&quot;&gt;Final step&lt;/h3&gt;

&lt;p&gt;When you reached the stage where connections from white labeled domains are succesfully hitting your server, it‚Äôs time to write some application logic that matches a hostname against a white labeled account and decorates the requests with the info on which white labeled account it belongs to.&lt;/p&gt;

&lt;p&gt;When you have this information for every request, you can easily use it inside your application interface to show white labeled branding, e.g. custom design, logos, emails, texts and other customly branded pieces of the app.&lt;/p&gt;</content><category term="posts" /><summary>Depending on your online business, white labeling can turn out to be a fantastic business model. This applies especially when your target customers are actually customers who have their own customers, for example agencies, consultancies and client-oriented businesses.</summary></entry><entry><title>Partial, resource-related dumps in PostgreSQL</title><link href="/posts/partial-resource-dump-postgres/" rel="alternate" type="text/html" title="Partial, resource-related dumps in PostgreSQL" /><published>2018-03-29T00:00:00+02:00</published><updated>2018-03-29T00:00:00+02:00</updated><id>/posts/partial-resource-dump-postgres</id><content type="html" xml:base="/posts/partial-resource-dump-postgres/">&lt;p&gt;Sometimes we find ourselves in a need for copying and restoring a specific set of data belonging to a common parent resource. For example, we want to connect to the production server, pull down fresh data related only to the specified user and restore it to our development database to debug an issue or just develop new features. When your database is tiny, you could just restore the whole thing, but once it grows, the complete restoration is out of the question, especially when you need to do it often.&lt;/p&gt;

&lt;p&gt;Here‚Äôs a simplified bash script I wrote that downloads everything belonging to the application user from the production database, deletes stale user data from the local development database and replaces it with the fresh data.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/sh&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Usage: ./script/restore_user 100&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;USER_ID&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;DATE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;date +%Y-%m-%d&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;SQL_FILENAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;data_user_&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;USER_ID&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;_&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;DATE&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;.sql

&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;-- Preparing a data dump file for the specified user...&quot;&lt;/span&gt;
ssh admin@db.myapp.com /bin/sh &lt;span class=&quot;sh&quot;&gt;&amp;lt;&amp;lt;EOT &amp;gt; $SQL_FILENAME
  echo &quot;Copying user...&quot; &amp;gt;&amp;amp;2
  echo &quot;COPY users FROM STDIN;&quot;
  psql -h db.myapp.com -U myusername mydatabase -c &quot;COPY (
    SELECT users.*
    FROM users
    WHERE id = ${USER_ID}
  ) TO STDOUT;&quot;
  echo &quot;\\.&quot;

  echo &quot;Copying user‚Äôs posts...&quot; &amp;gt;&amp;amp;2
  echo &quot;COPY posts FROM STDIN;&quot;
  psql -h db.myapp.com -U myusername mydatabase -c &quot;COPY (
    SELECT posts.*
    FROM posts
    WHERE user_id = ${user_id}
  ) TO STDOUT;&quot;
  echo &quot;\\.&quot;

  echo &quot;Copying post‚Äôs tags ...&quot; &amp;gt;&amp;amp;2
  echo &quot;COPY tags FROM STDIN;&quot;
  psql -h db.myapp.com -U myusername mydatabase -c &quot;COPY (
    SELECT tags.*
    FROM tags
    INNER JOIN posts ON posts.id = tags.post_id
    WHERE posts.user_id = ${user_id}
  ) TO STDOUT;&quot;
  echo &quot;\\.&quot;
EOT
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Let‚Äôs comment on what‚Äôs happening here. What we‚Äôre doing is essentially using Postgres‚Äôs &lt;code class=&quot;highlighter-rouge&quot;&gt;COPY&lt;/code&gt; function which is useful for moving data around tables. Usually it‚Äôs used to produce individual CSV files separately for each table, which are then individually restored using &lt;code class=&quot;highlighter-rouge&quot;&gt;COPY FROM&lt;/code&gt; command.&lt;/p&gt;

&lt;p&gt;Since this function is also able to read from the &lt;code class=&quot;highlighter-rouge&quot;&gt;STDIN&lt;/code&gt;, we bundle all &lt;code class=&quot;highlighter-rouge&quot;&gt;COPY&lt;/code&gt; commands together (using the  &lt;code class=&quot;highlighter-rouge&quot;&gt;.\&lt;/code&gt; which indicates the end of the input). Local PostgreSQL will then see sequences of &lt;code class=&quot;highlighter-rouge&quot;&gt;COPY FROM STDIN&lt;/code&gt;, then data, then &lt;code class=&quot;highlighter-rouge&quot;&gt;.\&lt;/code&gt;, indicating it‚Äôs done. We do this to avoid making multiple table-specific CSV files. Instead, we just put everything into one big SQL file.&lt;/p&gt;

&lt;p&gt;This was just the first part of the script. Now that we have the necessary data in an SQL file, we have to make place for it and restore it to our local database.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;-- Deleting old user data...&quot;&lt;/span&gt;
psql -d mydb_dev -c &lt;span class=&quot;s2&quot;&gt;&quot;
  DELETE FROM tags WHERE tags.id IN (
    SELECT tags.id
    FROM tags
    INNER join posts ON posts.id = tags.post_id
    WHERE user_id = &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;user_id&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;
  );

  DELETE FROM posts where user_id = &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;user_id&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;;
  DELETE FROM users where id = &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;user_id&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;;&quot;&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;-- Restoring fresh user data...&quot;&lt;/span&gt;
psql -d mydb_dev &amp;lt; &lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;SQL_FILENAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;-- Deleting temp data...&quot;&lt;/span&gt;
rm &lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;SQL_FILENAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;-- Done. Enjoy.&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Since this is only a partial dump related to a common resource or ancestor (application user, in this case), we need to make sure we also have all other data in our development database that the application needs to run and doesn‚Äôt belong to the user. Depending on your setup, you could easily restore those tables using &lt;code class=&quot;highlighter-rouge&quot;&gt;pg_dump&lt;/code&gt; command where you explicitly specify the tables.
But when you need to refresh only a subset of local data, a script like this comes in really handy.&lt;/p&gt;</content><category term="posts" /><summary>Sometimes we find ourselves in a need for copying and restoring a specific set of data belonging to a common parent resource. For example, we want to connect to the production server, pull down fresh data related only to the specified user and restore it to our development database to debug an issue or just develop new features. When your database is tiny, you could just restore the whole thing, but once it grows, the complete restoration is out of the question, especially when you need to do it often.</summary></entry><entry><title>CloudFront redirections for your SPA using AWS Lambda (A/B testing, maintenance page,‚Ä¶)</title><link href="/posts/cloudfront-redirections-lambda/" rel="alternate" type="text/html" title="CloudFront redirections for your SPA using AWS Lambda (A/B testing, maintenance page,...)" /><published>2017-09-10T00:00:00+02:00</published><updated>2017-09-10T00:00:00+02:00</updated><id>/posts/cloudfront-redirections-lambda</id><content type="html" xml:base="/posts/cloudfront-redirections-lambda/">&lt;p&gt;For many people, the stack of choice for deploying a JavaScript application (SPA) or other assets is to save them to Amazon S3 and serve it to the world over Amazon CloudFront CDN. With its cached edges around the world, it makes sure the users‚Äô browsers are able to download your application in the most efficient way possible.&lt;/p&gt;

&lt;figure&gt;
    &lt;a href=&quot;/images/lambda-post/cloudfront-map.png&quot;&gt;&lt;img src=&quot;/images/lambda-post/cloudfront-map.png&quot; /&gt;&lt;/a&gt;
    &lt;center&gt;
    &lt;figcaption&gt;At the time of writing, CloudFront offers around 100 edge locations around the globe.&lt;/figcaption&gt;&lt;/center&gt;
&lt;/figure&gt;

&lt;p&gt;A possible drawback of this application/server architecture is that your JavaScript application or other content is cached in various cache servers placed globally, and that seems problematic in cases where you want to suddenly place a redirection switch - serving your users something else, depending on some condition or request. You‚Äôre not in complete control of your server(s), and cache invalidations and DNS changes could take forever, especially in urgencies.&lt;/p&gt;

&lt;p&gt;One of these cases is showing a ‚Äúmaintenance site‚Äù. You know - those ‚ÄúWe‚Äôll be back shortly.‚Äù notices, when engineers are either sweatingly salvaging a botched back-end or just performing regular, scheduled maintenance.&lt;/p&gt;

&lt;p&gt;A popular technique in SPAs is to detect these adversities by listening for &lt;code class=&quot;highlighter-rouge&quot;&gt;5xx&lt;/code&gt; responses from the API server and rendering a ‚ÄúMaintenance‚Äù message. It‚Äôs a valid approach, but this comes with a couple of assumptions which make the problem detection unreliable.&lt;/p&gt;

&lt;p&gt;Two major assumptions:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;JavaScript application works OK,&lt;/li&gt;
  &lt;li&gt;Server is responding with HTTP code &lt;code class=&quot;highlighter-rouge&quot;&gt;5xx&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;But, what if your build system deploys a broken bundle which doesn‚Äôt work in a browser anymore (or maybe it breaks only in specific browsers)? What if your async API requests are timeouting and you don‚Äôt get any response?&lt;/p&gt;

&lt;p&gt;In these cases it‚Äôs best to have a manual switch &lt;strong&gt;on the server level&lt;/strong&gt; that puts your website into maintenance mode while you do the fixing.&lt;/p&gt;

&lt;p&gt;With CloudFront you‚Äôre able to achieve this by using &lt;a href=&quot;http://docs.aws.amazon.com/lambda/latest/dg/lambda-edge.html&quot;&gt;Lambda@Edge&lt;/a&gt; functions (an extension of AWS Lambda) in the Viewer Request trigger, which triggers BEFORE the CloudFront cache is checked and returned. Within this function you could do many different things, for example:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Inspect cookies, User-Agent, headers,‚Ä¶&lt;/li&gt;
  &lt;li&gt;Do HTTP redirections, personalize and generate responses depending on location and various other criteria, serve different content for crawler bots,&lt;/li&gt;
  &lt;li&gt;Make network calls to external resources (e.g., authorization).&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Returning to the maintenance page switch, we could write a Lambda function like this:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;exports&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;handler&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;302&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;statusDescription&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;Found&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[{&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;Location&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;https://my-site.com/maintenance.html&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}],&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;When we want to put this redirection to work, we simply assign its ARN to our CloudFront distribution in its behaviour settings:&lt;/p&gt;

&lt;figure&gt;
    &lt;a href=&quot;/images/lambda-post/cloudfront-lambda-redirect.png&quot;&gt;&lt;img src=&quot;/images/lambda-post/cloudfront-lambda-redirect.png&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;CloudFront distribution behaviour settings.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;‚Ä¶ and remove it once you don‚Äôt want the redirection anymore. The change is usually processed within a very short period of time (which is usually not the case when saving adjustments in CloudFront distributions).&lt;/p&gt;

&lt;p&gt;This mechanism can be used for a lot of other practical implementations, like A/B testing redirections, logging and handling web client specifics.&lt;/p&gt;</content><category term="posts" /><summary>For many people, the stack of choice for deploying a JavaScript application (SPA) or other assets is to save them to Amazon S3 and serve it to the world over Amazon CloudFront CDN. With its cached edges around the world, it makes sure the users‚Äô browsers are able to download your application in the most efficient way possible.</summary></entry><entry><title>List and download Dropbox files with Ruby</title><link href="/posts/download-dropbox-files-ruby/" rel="alternate" type="text/html" title="List and download Dropbox files with Ruby" /><published>2017-03-12T00:00:00+01:00</published><updated>2017-03-12T00:00:00+01:00</updated><id>/posts/download-dropbox-files-ruby</id><content type="html" xml:base="/posts/download-dropbox-files-ruby/">&lt;p&gt;If you find yourself in a need for downloading contents from Dropbox (or whole folders), a sane and quick way would be
to visit their web interface and select to download (compressed) files.&lt;/p&gt;

&lt;p&gt;But what about when you don‚Äôt have a password to access the interface, but you do have an API access token?&lt;/p&gt;

&lt;p&gt;I put together a small script to help you with that. Here it goes.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;fileutils&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;dropbox_sdk&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# dropbox-sdk-ruby gem&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;DropboxClient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;access_token&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Recursively traverse the contents in dir_path&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;list_files&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dir_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;metadata&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dir_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;contents&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;flat_map&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;is_dir&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;list_files&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;path&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;path&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# A folder on your local machine where contents will be downloaded to&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;dump_folder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;dropbox_dump&quot;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# List files for the root path (&#39;/&#39;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;file_paths&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;list_files&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Now we have the paths of all the files in the folder we provided (root folder). Let‚Äôs download them all.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;download_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dump_folder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;full_file_path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dump_folder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file_path&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;exist?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;full_file_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;File &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;full_file_path&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; already exists&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;contents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;metadata&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;get_file_and_metadata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;full_folder_path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;dirname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;full_file_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;FileUtils&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;mkdir_p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;full_folder_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;full_file_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;wb&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;contents&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Download every file in file_paths to specified local dump folder&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;file_paths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each_with_index&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Downloading &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_path&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; ...&quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;download_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dump_folder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_paths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; to go&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;</content><category term="posts" /><summary>How to use Ruby Dropbox SDK to download files.</summary></entry><entry><title>Tips for writing an indie e-book</title><link href="/posts/tips-for-writing-an-indie-ebook/" rel="alternate" type="text/html" title="Tips for writing an indie e-book" /><published>2017-01-29T00:00:00+01:00</published><updated>2017-01-29T00:00:00+01:00</updated><id>/posts/tips-for-writing-an-indie-ebook</id><content type="html" xml:base="/posts/tips-for-writing-an-indie-ebook/">&lt;p&gt;With the advent of solopreneurship, &lt;a href=&quot;https://www.indiehackers.com&quot;&gt;indie hacking&lt;/a&gt; and side hustling, writing and self-publishing niche e-books became a well recognized source of passive income, and, more importantly, an effective sales funnel to your main business - be it a personal brand, consulting gigs, or various services.&lt;/p&gt;

&lt;p&gt;A bit less than a year ago, I set myself up for my first serious writing adventure. Out of appreciation and internal need to evangelize the coolness of &lt;a href=&quot;http://emberjs.com/&quot;&gt;Ember.js&lt;/a&gt; (a web programming framework), a technical e-book &lt;a href=&quot;http://emberjs-book.com/&quot;&gt;Front-end revolution with Ember.js&lt;/a&gt; was born.&lt;/p&gt;

&lt;p&gt;I extracted some valuable tips from my experience of writing and successfully delivering it to the target audience. I call it a success, because, with a marketing budget of ‚Ç¨0.00, it helped more than 250 web developers learn to make web apps more efficiently. In addition to that, it still brings me passive revenue every month, and it grew my professional network and consulting business.&lt;/p&gt;

&lt;h2 id=&quot;the-prerequisites-for-writing-an-e-book&quot;&gt;The prerequisites for writing an e-book&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;Know your field in depth&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;All humbleness aside, one ought to grow up and become an expert first. Know your stuff.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Have a knack for writing, form and story-telling&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;Reading poor language and grammar destroys the experience. Nobody likes dull writing and genericism.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Be good at explaining&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;It‚Äôs easy to overestimate your mentoring abilites. Great tutoring is extremely hard.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Know your audience&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;Do you know a community where there are at least 5 people who will buy your book right off the bat, or at least be very interested in? And I don‚Äôt mean your family. It‚Äôs the same as any other business. Do your market research.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Know your competitors&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;Has your book already been written by somebody else? In that case, do you know its drawbacks and have constructed a plan how your e-book will address that?&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Do it for the greater good&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;There is too much bullshit out there. Write material because you genuinely like doing it and because it will help people. Quick dollar and recognition should be treated as happy side-effects.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;center&gt;
&lt;blockquote class=&quot;twitter-tweet&quot; data-lang=&quot;en&quot;&gt;&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;Just found out some company is building a web thing for US Paralympics and they‚Äôre using my book to learn &lt;a href=&quot;https://twitter.com/hashtag/emberjs?src=hash&quot;&gt;#emberjs&lt;/a&gt;! ü§ó&lt;a href=&quot;https://t.co/tv4BuDz1fF&quot;&gt;https://t.co/tv4BuDz1fF&lt;/a&gt;&lt;/p&gt;&amp;mdash; Matic Jurgliƒç (@matixmatix) &lt;a href=&quot;https://twitter.com/matixmatix/status/794460016602468352&quot;&gt;November 4, 2016&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async=&quot;&quot; src=&quot;//platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
&lt;/center&gt;

&lt;h2 id=&quot;tools&quot;&gt;Tools&lt;/h2&gt;

&lt;p&gt;Find an electronic book writing software that suits your needs. For example, if your book is about coding and includes computer code snippets, find something with a nice code syntax highlighter. Try to envision all the media material types that will be included, and choose accordingly.&lt;/p&gt;

&lt;p&gt;It‚Äôs very important the software you chose is able to export to a variety of formats. Of course, &lt;code class=&quot;highlighter-rouge&quot;&gt;.pdf&lt;/code&gt; is standard. A lot of people read on their e-readers, so make sure your writing software can spit out &lt;code class=&quot;highlighter-rouge&quot;&gt;.epub&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;.mobi&lt;/code&gt; formats. Don‚Äôt make the same rookie mistake as I did and write it in Pages (or MS Word). It will be an unmaintainable mess, and hard to export to a number of formats.&lt;/p&gt;

&lt;p&gt;If you don‚Äôt need anything special in that regards, there are some helpful e-book-creating services available, which can also act as a marketplace for your e-book. This is super helpful in case you don‚Äôt have an established following yet.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://leanpub.com/&quot;&gt;Leanpub&lt;/a&gt; offers integrated tooling for the whole journey: writing, publishing, marketing. Personally, I had great success with Leanpub, so I heavily recommend it. They‚Äôre promoting the books they think have potential (hint, hint: don‚Äôt be afraid to ask them to feature your e-book on their front page. You just might experience a spike in your sales on that day ü§ë ).&lt;/p&gt;

&lt;p&gt;There are other options, like &lt;a href=&quot;https://reedsy.com&quot;&gt;Reedsy&lt;/a&gt;, and &lt;a href=&quot;https://www.softcover.io/&quot;&gt;Softcover&lt;/a&gt;, which is more technical and needs more marketing setup.&lt;/p&gt;

&lt;h2 id=&quot;aesthetics-matter&quot;&gt;Aesthetics matter&lt;/h2&gt;

&lt;p&gt;The only popular books that can pull off a boring look is the Bible and O‚ÄôReilly books. So make sure to give your book an exciting cover.&lt;/p&gt;

&lt;p&gt;Here are some examples of rather boring e-book covers (that could make a potential reader wonder if the inside is equally dull ü§î):&lt;/p&gt;

&lt;figure class=&quot;third&quot;&gt;
  &lt;a href=&quot;https://leanpub.com/dowhatyoulove&quot;&gt;
    &lt;img src=&quot;/images/book-post/boring-book3.jpg&quot; /&gt;
    &lt;figcaption&gt;I can&#39;t even read the title.&lt;/figcaption&gt;
  &lt;/a&gt;
  &lt;a href=&quot;https://leanpub.com/whatsnewinjava8&quot;&gt;
	 &lt;img src=&quot;/images/book-post/boring-book2.jpg&quot; /&gt;
   &lt;figcaption&gt;Dry weed. Sounds good, right until you see this cover.&lt;/figcaption&gt;
  &lt;/a&gt;
  &lt;a href=&quot;https://leanpub.com/cstips&quot;&gt;
	 &lt;img src=&quot;/images/book-post/boring-book1.jpg&quot; /&gt;
   &lt;figcaption&gt;At least I can read the title.&lt;/figcaption&gt;
  &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;Here are some examples of appealing e-book covers that make you wanna read it even though you have no idea what are they about:&lt;/p&gt;

&lt;figure class=&quot;third&quot;&gt;
  &lt;a href=&quot;https://leanpub.com/grumpy-phpunit&quot;&gt;
	 &lt;img src=&quot;/images/book-post/cool-cover1.jpg&quot; /&gt;
   &lt;figcaption&gt;Ha! Look at this frustrated elephant!&lt;/figcaption&gt;
  &lt;/a&gt;
  &lt;a href=&quot;https://leanpub.com/trailblazer&quot;&gt;
	 &lt;img src=&quot;/images/book-post/cool-cover2.jpg&quot; /&gt;
   &lt;figcaption&gt;Whoah, a crazy ride!&lt;/figcaption&gt;
  &lt;/a&gt;
  &lt;a href=&quot;https://leanpub.com/manualjornalismodigital&quot;&gt;
	 &lt;img src=&quot;/images/book-post/cool-cover3.jpg&quot; /&gt;
   &lt;figcaption&gt;So many cool looking things in shapes!&lt;/figcaption&gt;
  &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;If you‚Äôre not a designing type, don‚Äôt worry. Pick some examples you like and ask your pixel savvy friend to help you out. Or, go to &lt;a href=&quot;https://www.fiverr.com/&quot;&gt;Fiverr&lt;/a&gt; and get one for 5 bucks.&lt;/p&gt;

&lt;h2 id=&quot;writing-tactics-for-upselling-and-getting-subscribers&quot;&gt;Writing tactics for upselling and getting subscribers&lt;/h2&gt;

&lt;p&gt;The point is to to get your readers‚Äô attention for a longer time period than just the duration of reading your e-book. To do that, introduce a few hooks in different sections of your e-book. Some ideas:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;If you have a mailing list, Twitter, or a blog, pick the most interesting sections of your book and next to them, offer your readers to follow you there if they want to know more.&lt;/li&gt;
  &lt;li&gt;If you have another product (some other e-book, videos, a course,‚Ä¶), try to touch its topic in one of your sections, and paste the link.&lt;/li&gt;
  &lt;li&gt;Offer extra content your readers can unlock if they award you with your email and subscribe to your stuff.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;You‚Äôre providing your readers with extra value, so don‚Äôt be afraid to throw a couple of these tricks inside your e-book.&lt;/p&gt;

&lt;h2 id=&quot;dedicated-website&quot;&gt;Dedicated website&lt;/h2&gt;

&lt;p&gt;If you‚Äôre serious about your indie e-book, it deserves to have &lt;a href=&quot;http://emberjs-book&quot;&gt;its own website&lt;/a&gt;, or its own section as a part of your existing website. This way, you‚Äôre in complete control of its SEO (and independent from other book markets, in case you chose to sell your book in any of them).&lt;/p&gt;

&lt;p&gt;Again, if your right brain hemisphere is underdeveloped, fear not. There is a big collection of good looking e-book website templates available on template markets. You can get one for cheap, fill in the copywriting and price, and you‚Äôre almost good to go. Include some real reader testimonials if you can.&lt;/p&gt;

&lt;p&gt;The only thing you need is a middleman that implements the payment infrastructure so you don‚Äôt have to deal with that. Probably the most popular service for that is &lt;a href=&quot;gumroad.com&quot;&gt;Gumroad&lt;/a&gt;. There you can upload your material and link it from your website. They take care of charging your reader and releasing them your material. You can configure coupons, promo codes, etc.&lt;/p&gt;

&lt;p&gt;Make sure to offer a chapter or two of your book for free. Let the reader input their email, and send them a free preview.&lt;/p&gt;

&lt;figure class=&quot;half&quot; style=&quot;text-align: center&quot;&gt;
    &lt;a href=&quot;http://emberjs-book.com&quot; style=&quot;margin: 0 auto&quot;&gt;&lt;img src=&quot;/images/book-post/free-pdf.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Put this on your website.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;I like this as I can ask people who decided not to buy the book what exactly turned them off.&lt;/p&gt;

&lt;h2 id=&quot;setting-the-price&quot;&gt;Setting the price&lt;/h2&gt;

&lt;p&gt;Pricing your e-book is tricky.&lt;/p&gt;

&lt;p&gt;Is it better to sell more copies for a cheaper price, or fewer for more? Finding a sweet spot in between not being perceived as cheap and not making your potential readers have second thoughts could be compared to predicting the stock market.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://signalvnoise.com/posts/3394-how-to-price-something&quot;&gt;Jason Fried&lt;/a&gt; made a fortune selling products online, and his advice is:&lt;/p&gt;

&lt;blockquote&gt;
  You can make up a number and see if it works.
&lt;/blockquote&gt;

&lt;p&gt;It‚Äôs good enough for a starting point, and you can always adjust it if you feel like you need it.&lt;/p&gt;

&lt;p&gt;Enabling multiple price brackets can increase conversions. It all depends on what you can offer together with your book. Have some videos, screencasts, or other material that could go with your book? Bundle it up and charge more than the price of your e-book alone.&lt;/p&gt;

&lt;p&gt;If you don‚Äôt have anything else to offer, you can sell your consulting. In my case, everything I could offer is my e-book and my knowledge, so I had to get a bit creative:&lt;/p&gt;

&lt;figure class=&quot;single&quot; style=&quot;text-align: center&quot;&gt;
    &lt;a href=&quot;http://emberjs-book.com&quot;&gt;&lt;img src=&quot;/images/book-post/pricing.png&quot; /&gt;&lt;/a&gt;
    &lt;figcaption style=&quot;width: 100%&quot;&gt;Come up with different packages.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Offering &lt;strong&gt;team licences&lt;/strong&gt; proved to be a good selling tactic.&lt;/p&gt;

&lt;p&gt;What I learned is that a lot of companies have money and want to do what is right. I never believed anybody will buy the third bracket, and I felt a bit sleazy adding it. It‚Äôs essentially the same thing, just with one small hour of my time added. It turned out I made quite a few of these &lt;strong&gt;‚ÄúExtra‚Äù&lt;/strong&gt; package sales. What‚Äôs even better, a lot of them didn‚Äôt ask for any consulting. And the best thing is that those few who asked for consulting, wanted to keep me around for extra help at a premium rate.&lt;/p&gt;

&lt;p&gt;Another lesson I learned is that people will buy your e-book even when there are free alternatives available, but you have to convince them that your material is superior and provides better value. It‚Äôs also in human nature to assign more value and worth to purchaseable products, compared to the free ones.&lt;/p&gt;

&lt;h2 id=&quot;launch-many-times&quot;&gt;Launch many times&lt;/h2&gt;

&lt;p&gt;After you launch your e-book, create many micro-launches.&lt;/p&gt;

&lt;p&gt;Added something new to the book? Create a fuss and share it all over. Holiday season? Offer a special holiday deal and let everybody know about it. This way you can push your sales and let people know your book is still up to date.&lt;/p&gt;

&lt;h2 id=&quot;team-up&quot;&gt;Team up&lt;/h2&gt;

&lt;p&gt;Another useful tactic is to team up with another author and sell your e-books combined for a discounted price. ‚ÄúGet more for less‚Äù, they say.&lt;/p&gt;

&lt;p&gt;In my case, I discovered that &lt;a href=&quot;http://thejsguy.com/&quot;&gt;David&lt;/a&gt; wrote a similar, but even more specialized &lt;a href=&quot;https://leanpub.com/emberdatainthewild&quot;&gt;e-book&lt;/a&gt;, and reached out to ask him if we can put our e-books in a bundle to sell them together for a lower price. Luckily, he was up for it, and after a few clicks on Leanpub, a new &lt;a href=&quot;https://leanpub.com/b/ember-bundle&quot;&gt;Ember Bundle&lt;/a&gt; was born. Apparently, readers like the combo, and the sales went up again üòé.&lt;/p&gt;

&lt;figure class=&quot;half&quot; style=&quot;text-align: center&quot;&gt;
    &lt;a href=&quot;https://leanpub.com/b/ember-bundle&quot; style=&quot;margin: 0 auto&quot;&gt;&lt;img src=&quot;/images/book-post/bundle.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Our bundle on Leanpub.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h2 id=&quot;its-hard&quot;&gt;It‚Äôs hard&lt;/h2&gt;

&lt;p&gt;Niche e-books usually reach hit or fad popularity, which means a low chance of on-going revenue after you are finished, especially in tech and marketing, where things move quickly. So, given how much work you‚Äôre planning to sink into it, you need to decide if it‚Äôs worth it.&lt;/p&gt;

&lt;p&gt;While writing it, I found myself so caught up in the details that I could &lt;strong&gt;no longer imagine how anybody could find my e-book useful&lt;/strong&gt;. The mental burden of delivering valuable and correct educational stuff nearly eradicated my will to finish it. When inspiration diminished, grit and discipline helped me push through.&lt;/p&gt;

&lt;p&gt;In the end, it was all worth it.&lt;/p&gt;

&lt;p&gt;&lt;small&gt; Special thanks to &lt;a href=&quot;https://twitter.com/artto&quot;&gt;@artto&lt;/a&gt; for designing the e-book‚Äôs cover and Katherine from Russia for reviewing this article. &lt;/small&gt;&lt;/p&gt;</content><category term="posts" /><summary>Write material because you genuinely like doing it and because it will help people. Quick dollar should be treated as a happy side-effect.</summary></entry><entry><title>Dynamic CSS in Ember templates</title><link href="/posts/dynamic-css-in-ember-templates/" rel="alternate" type="text/html" title="Dynamic CSS in Ember templates" /><published>2016-11-12T00:00:00+01:00</published><updated>2016-11-12T00:00:00+01:00</updated><id>/posts/dynamic-css-in-ember-templates</id><content type="html" xml:base="/posts/dynamic-css-in-ember-templates/">&lt;p&gt;Recently I was challenged with a task to dynamically colorize checkboxes when they are selected. The colors are generated on-the-fly when the select action is triggered:&lt;/p&gt;

&lt;iframe src=&quot;//giphy.com/embed/qeUvEToKvHGBa&quot; width=&quot;400&quot; height=&quot;250&quot; frameborder=&quot;0&quot; class=&quot;giphy-embed&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;&lt;small&gt;Finished functionality. It‚Äôs a selector for chart series.&lt;/small&gt;&lt;/p&gt;

&lt;p&gt;Since we generate colors dynamically and thus can‚Äôt make predefined CSS classes that determine the checkbox‚Äôs color, I thought it should be enough to simply inline the color style, like so:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;{{#&lt;/span&gt;&lt;span class=&quot;nn&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;chartSeries&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;series&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}}&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;checkbox&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;input&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;checkbox&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;style=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;{{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;html-safe&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;concat&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;color:&#39;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;series&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;checked=‚Ä¶&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;label&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;for=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;{{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;series&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;seriesId&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
      &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;{{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;series&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;lt;/label&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;{{/&lt;/span&gt;&lt;span class=&quot;nn&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;small&gt;Random color is set to the the &lt;code class=&quot;highlighter-rouge&quot;&gt;series.color&lt;/code&gt; property on checkbox change event.&lt;/small&gt;&lt;/p&gt;

&lt;p&gt;Due to the way these custom checkboxes are implemented, I learned this is not going to work. The place to define checkbox‚Äôs background color is actually in the label‚Äôs &lt;code class=&quot;highlighter-rouge&quot;&gt;::before&lt;/code&gt; pseudo selector:&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;a href=&quot;/images/dynamic-css-post/1.jpg&quot;&gt;&lt;img src=&quot;/images/dynamic-css-post/1.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;You can&#39;t implement pseudo-element declarations using inline CSS.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h2 id=&quot;lesson-1-css-is-not-designed-to-accept-pseudo-element-styles-in-the-style-attribute&quot;&gt;Lesson 1: CSS is not designed to accept pseudo-element styles in the style attribute.&lt;/h2&gt;

&lt;p&gt;What can we do?&lt;/p&gt;

&lt;p&gt;The only solution that came to my mind is to generate CSS classes dynamically. I naively wrote this piece of code in the template, and for some reason, I didn‚Äôt expect it to work:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;style&amp;gt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;{{#&lt;/span&gt;&lt;span class=&quot;nn&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;chartSeries&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;series&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;
    input[type=&quot;checkbox&quot;]#&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;{{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;series&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;seriesId&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;.styled:checked + label:before {
      background: &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;{{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;series&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;
      border-color: &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;{{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;series&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;
    }
  &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;{{/&lt;/span&gt;&lt;span class=&quot;nn&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}}&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/style&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;But it did. I was amazed by how Ember‚Äôs templating engine digests this without problems, and dynamically adds the necessary CSS declarations to the &lt;code class=&quot;highlighter-rouge&quot;&gt;style&lt;/code&gt; tag when the &lt;code class=&quot;highlighter-rouge&quot;&gt;chartSeries&lt;/code&gt; array changes:&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;a href=&quot;/images/dynamic-css-post/2.jpg&quot;&gt;&lt;img src=&quot;/images/dynamic-css-post/2.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;The templating engine inserts some whitespace, but we can live with that.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h2 id=&quot;lesson-2-when-you-need-a-dirty-workaround-embers-templating-engine-can-reactively-spit-out-practically-any-markup-a-browser-can-understand&quot;&gt;Lesson 2: When you need a dirty workaround, Ember‚Äôs templating engine can reactively spit out practically any markup a browser can understand.&lt;/h2&gt;

&lt;p&gt;Just be careful not to ruin your site‚Äôs performance.&lt;/p&gt;

&lt;p&gt;In our case, every time the &lt;code class=&quot;highlighter-rouge&quot;&gt;chartSeries&lt;/code&gt; array changes, the browser needs to recalculate style, which could lead to page clunkiness if we had a lot of elements and a lot of updates in a short amount of time.&lt;/p&gt;</content><category term="posts" /><summary>When you need a dirty workaround, Ember&#39;s templating engine can reactively spit out practically any markup a browser can understand.</summary></entry></feed>
